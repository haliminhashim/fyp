{"version":3,"sources":["../../src/pages/mygroup/mygroup.module.ts","../../src/pages/mygroup/mygroup.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MygroupPage } from './mygroup';\n\n@NgModule({\n  declarations: [\n    MygroupPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MygroupPage),\n  ],\n})\nexport class MygroupPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mygroup/mygroup.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { UsersProvider } from '../../providers/users/users';\nimport { BigchaindbProvider } from '../../providers/bigchaindb/bigchaindb';\n\n@IonicPage()\n@Component({\n  selector: 'page-mygroup',\n  templateUrl: 'mygroup.html',\n})\nexport class MygroupPage {\n  user;\n  transactions: any = [];\n  constructor(public userProvider: UsersProvider, public bigchaindbProvider: BigchaindbProvider, public navCtrl: NavController, public navParams: NavParams) {\n    this.user = this.userProvider.currentUser();\n  }\n  ionViewCanEnter() {\n    this.bigchaindbProvider.searchTransaction('\"' + this.user.email + '\"').then(async data => {\n      let result: any = data\n      result.forEach(element => {\n        if (element.data.type == \"trlprtcp\") {\n          element.product = {\n            image: \"\"\n          }\n          element.data.referrals = []\n          this.transactions.push(element)\n        }\n      });\n      await this.transactions.forEach((transaction, index) => {\n        this.bigchaindbProvider.searchTransaction(transaction.data.groupBuyId).then(data => {\n          let result: any = data;\n          result.forEach(element => {\n            if (element.data.type == \"trlgrpbuy\") {\n              this.transactions[index].product = element.data.product\n              this.transactions[index].tiers = element.data.tiers\n              this.transactions[index].discount = 0\n            }\n          });\n\n          let invitesCodes: any = [];\n          let referrals: any = [];\n\n          invitesCodes.push(transaction.data.inviteCode);\n          invitesCodes.forEach(code => {\n            result.forEach(transaction => {\n              if (code == transaction.data.referral)\n                invitesCodes.push(transaction.data.inviteCode)\n            });\n          });\n\n          invitesCodes.forEach(code => {\n            result.forEach(element => {\n              if (code == element.data.referral && this.user.email != element.data.email)\n                referrals.push(element.data.email)\n            });\n          });\n          this.transactions[index].data.referrals = referrals\n\n          transaction.tiers.forEach(tier => {\n            // console.log(tier.amount)\n            if(referrals.length >= tier.amount){\n              this.transactions[index].discount = tier.discount\n            }\n          });\n        });\n      });\n    })\n    // console.log(this.transactions)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mygroup/mygroup.ts"],"sourceRoot":""}