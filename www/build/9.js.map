{"version":3,"sources":["../../src/pages/groupbuy-confirmation/groupbuy-confirmation.module.ts","../../src/pages/groupbuy-confirmation/groupbuy-confirmation.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { GroupbuyConfirmationPage } from './groupbuy-confirmation';\n\n@NgModule({\n  declarations: [\n    GroupbuyConfirmationPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(GroupbuyConfirmationPage),\n  ],\n})\nexport class GroupbuyConfirmationPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/groupbuy-confirmation/groupbuy-confirmation.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ModalController, ToastController } from 'ionic-angular';\nimport { UsersProvider } from '../../providers/users/users';\nimport { AddressesProvider } from '../../providers/addresses/addresses';\nimport { OrdersProvider } from '../../providers/orders/orders';\nimport { BigchaindbProvider } from '../../providers/bigchaindb/bigchaindb';\n\n@IonicPage()\n@Component({\n  selector: 'page-groupbuy-confirmation',\n  templateUrl: 'groupbuy-confirmation.html',\n})\nexport class GroupbuyConfirmationPage {\n  paymentdata: any;\n  paymentdetails: any;\n  payment: any = \"paypal\";\n  delivery: any;\n  subTotalAmnt: number = 0.00;\n  shippingAmnt: number = 1.00;\n  totalAmnt: number = 0.00;\n  shippingAddress: any = { id: null };\n  billingAddress: any = { id: null };\n  deliveryOption;\n  user: any = this.usersProvider.currentUser();\n  product: any = null;\n  inviteCode: any = \"\";\n  quantity: number = 1;\n  constructor(public toastCtrl: ToastController, public bigchaindbProvider: BigchaindbProvider, public ordersProvider: OrdersProvider, public modalCtrl: ModalController, public addressesProvider: AddressesProvider, public usersProvider: UsersProvider, public navCtrl: NavController, public navParams: NavParams) {\n\n    this.product = this.navParams.get(\"data\").data.product;\n    this.inviteCode = this.navParams.get(\"inviteCode\");\n    this.deliveryOption = [{\n      id: 1,\n      name: \"Standard\",\n      price: 1.00,\n    }, {\n      id: 2,\n      name: \"Express\",\n      price: 3.00,\n    }];\n\n    this.delivery = 0\n    this.payment = \"paypal\";\n    this.subTotalAmnt = this.navParams.get(\"data\").data.product.price;\n    this.totalAmnt = this.subTotalAmnt + this.shippingAmnt;\n    this.setAddresses();\n\n  }\n\n  presentToast(msg) {\n    let toast = this.toastCtrl.create({\n      message: msg,\n      duration: 1500,\n      position: 'bottom'\n    });\n\n    toast.onDidDismiss(() => {\n      console.log('Dismissed toast');\n    });\n\n    toast.present();\n  }\n\n  decreaseQuantity() {\n    let quantity = this.quantity;\n    if (quantity <= 1) {\n      this.presentToast(\"Cannot Quantity Minimum 1\");\n    }\n    else {\n      this.quantity -= 1;\n      this.calculateTotal()\n    }\n  }\n\n  increaseQuantity() {\n    let quantity = this.quantity;\n    if (quantity >= 10) {\n      this.presentToast(\"Cannot Quantity Maximum 10\");\n    }\n    else {\n      this.quantity += 1;\n      this.calculateTotal()\n    }\n  }\n\n  calculateTotal() {\n    this.shippingAmnt = this.deliveryOption[this.delivery].price\n    this.totalAmnt = (+this.subTotalAmnt * this.quantity) + +this.shippingAmnt;\n  }\n\n  setAddresses() {\n    let billingId = this.user.defaultBillingAddress;\n    let shippingId = this.user.defaultShippingAddress;\n    if (billingId != null) {\n      this.addressesProvider.getAddress(billingId).then(data => {\n        this.billingAddress = data;\n      });\n    }\n    else {\n      this.billingAddress.id = null;\n    }\n\n    if (shippingId != null) {\n      this.addressesProvider.getAddress(shippingId).then(data => {\n        this.shippingAddress = data;\n      });\n    }\n    else\n      this.shippingAddress.id = null;\n  }\n\n  changeShippingAddress() {\n    let addressId = null;\n    if (this.shippingAddress.id != null)\n      addressId = this.shippingAddress.id\n    var modalPage = this.modalCtrl.create('AddressPickerPage', {\n      id: addressId\n    });\n\n    modalPage.onDidDismiss((data) => {\n      this.addressesProvider.getAddress(data).then(data => {\n        this.shippingAddress = data;\n      });\n    })\n\n    modalPage.present();\n  }\n\n  changeBillingAddress() {\n    let addressId = null;\n    if (this.billingAddress.id != null)\n      addressId = this.shippingAddress.id\n    var modalPage = this.modalCtrl.create('AddressPickerPage', {\n      id: addressId\n    });\n\n    modalPage.onDidDismiss((data) => {\n      this.addressesProvider.getAddress(data).then(data => {\n        this.billingAddress = data;\n      });\n    })\n\n    modalPage.present();\n  }\n\n  create() {\n    let data = {\n      email: this.user.email,\n      keys: this.user.keys,\n      shipping: this.shippingAddress,\n      referral: this.inviteCode,\n      groupBuyId: this.navParams.get(\"data\").data.id,\n      quantity: this.quantity,\n      inviteCode: this.user.id + this.navParams.get(\"data\").data.id,\n      payment: this.payment,\n    }\n    this.bigchaindbProvider.joinGroupBuy(data)\n    .then(res => {\n      this.presentToast(\"Joined Group Buy Successfully\");\n      this.navCtrl.pop();\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/groupbuy-confirmation/groupbuy-confirmation.ts"],"sourceRoot":""}